{"version":3,"sources":["firebase.js","Home.js","GoLink.js","App.js","reportWebVitals.js","index.js"],"names":["app","firebase","initializeApp","apiKey","authDomain","projectId","storageBucket","messagingSenderId","appId","measurementId","randomString","length","chars","result","i","Math","floor","random","loadingInterval","Home","useState","setUrl","code","setCode","file","setFile","key","setKey","loadingText","setLoadingText","upload","a","console","log","setInterval","prev","loadingStr","storage","ref","name","put","on","child","getDownloadURL","then","url","uuidv4","firestore","collection","add","clearInterval","className","type","onChange","e","target","files","onClick","href","GoLink","useParams","history","useHistory","fileLink","setFilelink","useEffect","where","onSnapshot","data","empty","push","docs","finalData","id","style","display","placeholder","value","document","getElementById","color","App","exact","path","component","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode"],"mappings":"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","file":"static/js/main.75520f6e.chunk.js","sourcesContent":["import firebase from \"firebase\";\n\nconst firebaseConfig = {\n  apiKey: \"AIzaSyCVJR_BMTGo-tSbnuZFis8GW4cOg9knTIs\",\n  authDomain: \"hometask-a2f16.firebaseapp.com\",\n  projectId: \"hometask-a2f16\",\n  storageBucket: \"hometask-a2f16.appspot.com\",\n  messagingSenderId: \"126836864581\",\n  appId: \"1:126836864581:web:cd39168cbc0087c7e0552c\",\n  measurementId: \"G-CYBMJ2NPD2\",\n};\n\nexport const app = firebase.initializeApp(firebaseConfig);\n","import React, { useState } from \"react\";\nimport { app } from \"./firebase\";\nimport { v4 as uuidv4 } from \"uuid\";\nimport \"./Home.css\";\nimport { IconButton } from \"@material-ui/core\";\nimport { Send } from \"@material-ui/icons\";\nfunction randomString(length=6) {\n  const chars = ['0','1','2','3','4','5','6','7','8','9']\n  let result = '';\n  for (let i = length; i > 0; --i) result += chars[Math.floor(Math.random() * chars.length)];\n  return result;\n}\nlet loadingInterval = null;\n\nfunction Home() {\n  const [url, setUrl] = useState(\"\");\n  const [code, setCode] = useState(\"\");\n\n  const [file, setFile] = useState(\"\");\n  const [key, setKey] = useState(\"\");\n  const [loadingText,setLoadingText] = useState(\"\");\n\n  const startLoading = ()=>{\n    console.log('here')\n    setLoadingText(\"Loading.\")\n    loadingInterval = setInterval(() => {\n      setLoadingText(prev =>{\n        let loadingStr = prev +'.';\n        if(loadingStr == 'Loading....')\n        loadingStr= 'Loading.'\n        console.log('in interval',loadingStr)\n        return loadingStr;\n\n      })\n    }, 500);\n\n  }\n\n  const stopLoading = ()=>{\n    \n    setLoadingText(\"\")\n    console.log('interval',loadingInterval)\n    clearInterval(loadingInterval)\n  }\n\n  const upload = async () => {\n    if (file == null && key == null) return;\n    setUrl(\"Getting Download Link...\");\n    // Sending File to Firebase Storage\n    startLoading()\n    app\n      .storage()\n      .ref(`/files/${file.name}`)\n      .put(file)\n      .on(\"state_changed\", null, null, () => {\n        // Getting Download Link\n     \n        app\n          .storage()\n          .ref(\"files\")\n          .child(file.name)\n          .getDownloadURL()\n          .then(async (url) => {\n            setUrl(url);\n            let code = uuidv4();\n            let key = randomString();\n            setKey(key);\n                 \n            console.log(code)\n            await app.firestore().collection(\"urls\").add({\n              url: url,\n              code: code,\n              key: key,\n            });\n\n            setCode(`https://hometask-a2f16.web.app/l/${code}`);\n            //setCode(`http://localhost:3000/l/${code}`);\n            stopLoading()\n          });\n      });\n  };\n \n  return (\n    <div>\n      <div className=\"home__center\">\n        <h1>Upload File</h1>\n      </div>\n      <div className=\"container\">\n        \n        <input\n          type=\"file\"\n          className=\"form-control\"\n          onChange={(e) => {\n            setFile(e.target.files[0]);\n          }}\n        />\n        \n        <br />\n        <button className=\"btn btn-primary\" onClick={upload}>\n          Submit\n        </button>\n      </div>\n      <br />\n      <br />\n      {code !== \"\" && (\n        <div>\n          <h2>Here Is Your Url</h2>\n          <h3>\n            <a href={code} target=\"_blank\">\n              {code}\n            </a>\n          </h3>\n          {key != \"\" && <h2>your random key is {key}</h2>}\n  \n        </div>\n      )}\n      {loadingText !=\"\" && <h1>{loadingText}</h1>}\n    </div>\n  );\n}\n\nexport default Home;\n","import React, { useEffect, useState } from \"react\";\nimport { Link } from \"react-router-dom\";\nimport { useHistory, useParams } from \"react-router-dom\";\nimport { app } from \"./firebase\";\n\nfunction GoLink() {\n  const { code } = useParams();\n  const history = useHistory();\n\n  const [fileLink, setFilelink] = useState(\"\");\n  const [key, setKey] = useState(\"\");\n\n  useEffect(() => {\n    let query = app.firestore().collection(\"urls\").where(\"code\", \"==\", code);\n    query.onSnapshot((data) => {\n      if (data.empty) {\n        return history.push(\"/\");\n      }\n      console.log(data.docs);\n      let finalData = data.docs[0].data();\n      setFilelink(finalData);\n\n      // window.location.replace(finalData.url);\n    });\n  }, []);\n\n  const checkkey = () => {\n    if (key !== \"\" && fileLink.key === key) {\n      document.getElementById(\"input\").style.display = \"none\";\n      document.getElementById(\"result\").style.display = \"block\";\n    } else {\n      document.getElementById(\"input\").style.display = \"block\";\n      document.getElementById(\"error\").style.color = \"red\";\n    }\n  };\n\n  return (\n    <div className=\"container\">\n      <div>\n        <div id=\"result\" style={{ display: \"none\" }}>\n          <h1>Your File Is Ready To Download</h1>\n\n          <a href={fileLink.url} className=\"btn btn-success\" target=\"_blank\">\n            Download\n          </a>\n        </div>\n\n        <div id=\"input\">\n          <h1 id=\"error\">Please Enter Valid Key To Download File</h1>\n\n          <input\n            type=\"number\"\n            className=\"form-control\"\n            placeholder=\"Enter 6 Digit Secret Key\"\n            value={key}\n            onChange={(e) => setKey(e.target.value)}\n          />\n          <br />\n          <button className=\"btn btn-primary\" onClick={() => checkkey()}>\n            Submit\n          </button>\n        </div>\n      </div>\n    </div>\n  );\n}\n\nexport default GoLink;\n","import \"./App.css\";\nimport { BrowserRouter as Router, Switch, Route } from \"react-router-dom\";\nimport Home from \"./Home\";\nimport GoLink from \"./GoLink\";\n\nfunction App() {\n  return (\n    <div className=\"app\">\n      <Router>\n        <Switch>\n          <Route exact path=\"/\" component={Home} />\n          <Route exact path=\"/l/:code\" component={GoLink} />\n        </Switch>\n      </Router>\n    </div>\n  );\n}\n\nexport default App;\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport \"./index.css\";\nimport App from \"./App\";\nimport reportWebVitals from \"./reportWebVitals\";\nimport \"bootstrap/dist/css/bootstrap.min.css\";\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById(\"root\")\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}